{"version":3,"sources":["queue.js"],"names":[],"mappings":";AACA,IAAI,IAAI,QAAQ,KAAR,CAAR;;AAEA,OAAO,OAAP,GAAiB,KAAjB;AACA,SAAS,KAAT,GAAiB;AACb,QAAI,OAAO,EAAE,KAAF,EAAX;AACA,QAAI,SAAS,EAAE,KAAF,EAAb;AACA,WAAO;AACH,aAAK,UAAU,KAAV,EAAiB;AAClB,gBAAI,OAAO,EAAE,KAAF,EAAX;AACA,iBAAK,OAAL,CAAa;AACT,sBAAM,KADG;AAET,sBAAM,KAAK;AAFF,aAAb;AAIA,iBAAK,OAAL,GAAe,KAAK,OAApB;AACH,SARE;AASH,aAAK,YAAY;AACb,gBAAI,SAAS,KAAK,OAAL,CAAa,GAAb,CAAiB,MAAjB,CAAb;AACA,iBAAK,OAAL,GAAe,KAAK,OAAL,CAAa,GAAb,CAAiB,MAAjB,CAAf;AACA,mBAAO,OAAO,IAAP,CAAY,UAAU,KAAV,EAAiB;AAChC,uBAAO,OAAP,CAAe,KAAf;AACA,sBAAM,KAAN;AACH,aAHM,CAAP;AAIH,SAhBE;AAiBH,gBAAQ,OAAO,OAjBZ;AAkBH,eAAO,UAAU,KAAV,EAAiB;AACpB,oBAAQ,SAAS,IAAI,KAAJ,CAAU,mCAAV,CAAjB;AACA,gBAAI,MAAM,EAAC,MAAM,EAAE,MAAF,CAAS,KAAT,CAAP,EAAV;AACA,gBAAI,IAAJ,GAAW,GAAX;AACA,iBAAK,OAAL,CAAa,GAAb;AACA,mBAAO,OAAO,OAAd;AACH;AAxBE,KAAP;AA0BH","file":"queue-compiled.js","sourcesContent":["\nvar Q = require(\"./q\");\n\nmodule.exports = Queue;\nfunction Queue() {\n    var ends = Q.defer();\n    var closed = Q.defer();\n    return {\n        put: function (value) {\n            var next = Q.defer();\n            ends.resolve({\n                head: value,\n                tail: next.promise\n            });\n            ends.resolve = next.resolve;\n        },\n        get: function () {\n            var result = ends.promise.get(\"head\");\n            ends.promise = ends.promise.get(\"tail\");\n            return result.fail(function (error) {\n                closed.resolve(error);\n                throw error;\n            });\n        },\n        closed: closed.promise,\n        close: function (error) {\n            error = error || new Error(\"Can't get value from closed queue\");\n            var end = {head: Q.reject(error)};\n            end.tail = end;\n            ends.resolve(end);\n            return closed.promise;\n        }\n    };\n}\n\n"]}