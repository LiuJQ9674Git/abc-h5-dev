{"version":3,"sources":["1to2.js"],"names":[],"mappings":"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","file":"1to2-compiled.js","sourcesContent":["#!/usr/bin/env node\n/*********************************************************************\n * NAN - Native Abstractions for Node.js\n *\n * Copyright (c) 2016 NAN contributors\n *\n * MIT License <https://github.com/nodejs/nan/blob/master/LICENSE.md>\n ********************************************************************/\n\nvar commander = require('commander'),\n    fs = require('fs'),\n    glob = require('glob'),\n    groups = [],\n    total = 0,\n    warning1 = '/* ERROR: Rewrite using Buffer */\\n',\n    warning2 = '\\\\/\\\\* ERROR\\\\: Rewrite using Buffer \\\\*\\\\/\\\\n',\n    length,\n    i;\n\nfs.readFile(__dirname + '/package.json', 'utf8', function (err, data) {\n  if (err) {\n    throw err;\n  }\n\n  commander\n      .version(JSON.parse(data).version)\n      .usage('[options] <file ...>')\n      .parse(process.argv);\n\n  if (!process.argv.slice(2).length) {\n    commander.outputHelp();\n  }\n});\n\n/* construct strings representing regular expressions\n   each expression contains a unique group allowing for identification of the match\n   the index of this key group, relative to the regular expression in question,\n    is indicated by the first array member */\n\n/* simple substistutions, key group is the entire match, 0 */\ngroups.push([0, [\n  '_NAN_',\n  'NODE_SET_METHOD',\n  'NODE_SET_PROTOTYPE_METHOD',\n  'NanAsciiString',\n  'NanEscapeScope',\n  'NanReturnValue',\n  'NanUcs2String'].join('|')]);\n\n/* substitutions of parameterless macros, key group is 1 */\ngroups.push([1, ['(', [\n  'NanEscapableScope',\n  'NanReturnNull',\n  'NanReturnUndefined',\n  'NanScope'].join('|'), ')\\\\(\\\\)'].join('')]);\n\n/* replace TryCatch with NanTryCatch once, gobbling possible namespace, key group 2 */\ngroups.push([2, '(?:(?:v8\\\\:\\\\:)?|(Nan)?)(TryCatch)']);\n\n/* NanNew(\"string\") will likely not fail a ToLocalChecked(), key group 1 */ \ngroups.push([1, ['(NanNew)', '(\\\\(\"[^\\\\\"]*\"[^\\\\)]*\\\\))(?!\\\\.ToLocalChecked\\\\(\\\\))'].join('')]);\n\n/* Removed v8 APIs, warn that the code needs rewriting using node::Buffer, key group 2 */\ngroups.push([2, ['(', warning2, ')?', '^.*?(', [\n      'GetIndexedPropertiesExternalArrayDataLength',\n      'GetIndexedPropertiesExternalArrayData',\n      'GetIndexedPropertiesExternalArrayDataType',\n      'GetIndexedPropertiesPixelData',\n      'GetIndexedPropertiesPixelDataLength',\n      'HasIndexedPropertiesInExternalArrayData',\n      'HasIndexedPropertiesInPixelData',\n      'SetIndexedPropertiesToExternalArrayData',\n      'SetIndexedPropertiesToPixelData'].join('|'), ')'].join('')]);\n\n/* No need for NanScope in V8-exposed methods, key group 2 */\ngroups.push([2, ['((', [\n      'NAN_METHOD',\n      'NAN_GETTER',\n      'NAN_SETTER',\n      'NAN_PROPERTY_GETTER',\n      'NAN_PROPERTY_SETTER',\n      'NAN_PROPERTY_ENUMERATOR',\n      'NAN_PROPERTY_DELETER',\n      'NAN_PROPERTY_QUERY',\n      'NAN_INDEX_GETTER',\n      'NAN_INDEX_SETTER',\n      'NAN_INDEX_ENUMERATOR',\n      'NAN_INDEX_DELETER',\n      'NAN_INDEX_QUERY'].join('|'), ')\\\\([^\\\\)]*\\\\)\\\\s*\\\\{)\\\\s*NanScope\\\\(\\\\)\\\\s*;'].join('')]);\n\n/* v8::Value::ToXXXXXXX returns v8::MaybeLocal<T>, key group 3 */\ngroups.push([3, ['([\\\\s\\\\(\\\\)])([^\\\\s\\\\(\\\\)]+)->(', [\n      'Boolean',\n      'Number',\n      'String',\n      'Object',\n      'Integer',\n      'Uint32',\n      'Int32'].join('|'), ')\\\\('].join('')]);\n\n/* v8::Value::XXXXXXXValue returns v8::Maybe<T>, key group 3 */\ngroups.push([3, ['([\\\\s\\\\(\\\\)])([^\\\\s\\\\(\\\\)]+)->((?:', [\n      'Boolean',\n      'Number',\n      'Integer',\n      'Uint32',\n      'Int32'].join('|'), ')Value)\\\\('].join('')]);\n\n/* NAN_WEAK_CALLBACK macro was removed, write out callback definition, key group 1 */\ngroups.push([1, '(NAN_WEAK_CALLBACK)\\\\(([^\\\\s\\\\)]+)\\\\)']);\n\n/* node::ObjectWrap and v8::Persistent have been replaced with Nan implementations, key group 1 */\ngroups.push([1, ['(', [\n  'NanDisposePersistent',\n  'NanObjectWrapHandle'].join('|'), ')\\\\s*\\\\(\\\\s*([^\\\\s\\\\)]+)'].join('')]);\n\n/* Since NanPersistent there is no need for NanMakeWeakPersistent, key group 1 */\ngroups.push([1, '(NanMakeWeakPersistent)\\\\s*\\\\(\\\\s*([^\\\\s,]+)\\\\s*,\\\\s*']);\n\n/* Many methods of v8::Object and others now return v8::MaybeLocal<T>, key group 3 */\ngroups.push([3, ['([\\\\s])([^\\\\s]+)->(', [\n  'GetEndColumn',\n  'GetFunction',\n  'GetLineNumber',\n  'NewInstance',\n  'GetPropertyNames',\n  'GetOwnPropertyNames',\n  'GetSourceLine',\n  'GetStartColumn',\n  'ObjectProtoToString',\n  'ToArrayIndex',\n  'ToDetailString',\n  'CallAsConstructor',\n  'CallAsFunction',\n  'CloneElementAt',\n  'Delete',\n  'ForceSet',\n  'Get',\n  'GetPropertyAttributes',\n  'GetRealNamedProperty',\n  'GetRealNamedPropertyInPrototypeChain',\n  'Has',\n  'HasOwnProperty',\n  'HasRealIndexedProperty',\n  'HasRealNamedCallbackProperty',\n  'HasRealNamedProperty',\n  'Set',\n  'SetAccessor',\n  'SetIndexedPropertyHandler',\n  'SetNamedPropertyHandler',\n  'SetPrototype'].join('|'), ')\\\\('].join('')]);\n\n/* You should get an error if any of these fail anyways,\n   or handle the error better, it is indicated either way, key group 2 */\ngroups.push([2, ['NanNew(<(?:v8\\\\:\\\\:)?(', ['Date', 'String', 'RegExp'].join('|'), ')>)(\\\\([^\\\\)]*\\\\))(?!\\\\.ToLocalChecked\\\\(\\\\))'].join('')]);\n\n/* v8::Value::Equals now returns a v8::Maybe, key group 3 */\ngroups.push([3, '([\\\\s\\\\(\\\\)])([^\\\\s\\\\(\\\\)]+)->(Equals)\\\\(([^\\\\s\\\\)]+)']);\n\n/* NanPersistent makes this unnecessary, key group 1 */\ngroups.push([1, '(NanAssignPersistent)(?:<v8\\\\:\\\\:[^>]+>)?\\\\(([^,]+),\\\\s*']);\n\n/* args has been renamed to info, key group 2 */\ngroups.push([2, '(\\\\W)(args)(\\\\W)'])\n\n/* node::ObjectWrap was replaced with NanObjectWrap, key group 2 */\ngroups.push([2, '(\\\\W)(?:node\\\\:\\\\:)?(ObjectWrap)(\\\\W)']);\n\n/* v8::Persistent was replaced with NanPersistent, key group 2 */\ngroups.push([2, '(\\\\W)(?:v8\\\\:\\\\:)?(Persistent)(\\\\W)']);\n\n/* counts the number of capturing groups in a well-formed regular expression,\n   ignoring non-capturing groups and escaped parentheses */\nfunction groupcount(s) {\n  var positive = s.match(/\\((?!\\?)/g),\n      negative = s.match(/\\\\\\(/g);\n  return (positive ? positive.length : 0) - (negative ? negative.length : 0);\n}\n\n/* compute the absolute position of each key group in the joined master RegExp */\nfor (i = 1, length = groups.length; i < length; i++) {\n\ttotal += groupcount(groups[i - 1][1]);\n\tgroups[i][0] += total;\n}\n\n/* create the master RegExp, whis is the union of all the groups' expressions */\nmaster = new RegExp(groups.map(function (a) { return a[1]; }).join('|'), 'gm');\n\n/* replacement function for String.replace, receives 21 arguments */\nfunction replace() {\n\t/* simple expressions */\n      switch (arguments[groups[0][0]]) {\n        case '_NAN_':\n          return 'NAN_';\n        case 'NODE_SET_METHOD':\n          return 'NanSetMethod';\n        case 'NODE_SET_PROTOTYPE_METHOD':\n          return 'NanSetPrototypeMethod';\n        case 'NanAsciiString':\n          return 'NanUtf8String';\n        case 'NanEscapeScope':\n          return 'scope.Escape';\n        case 'NanReturnNull':\n          return 'info.GetReturnValue().SetNull';\n        case 'NanReturnValue':\n          return 'info.GetReturnValue().Set';\n        case 'NanUcs2String':\n          return 'v8::String::Value';\n        default:\n      }\n\n      /* macros without arguments */\n      switch (arguments[groups[1][0]]) {\n        case 'NanEscapableScope':\n          return 'NanEscapableScope scope'\n        case 'NanReturnUndefined':\n          return 'return';\n        case 'NanScope':\n          return 'NanScope scope';\n        default:\n      }\n\n      /* TryCatch, emulate negative backref */\n      if (arguments[groups[2][0]] === 'TryCatch') {\n        return arguments[groups[2][0] - 1] ? arguments[0] : 'NanTryCatch';\n      }\n\n      /* NanNew(\"foo\") --> NanNew(\"foo\").ToLocalChecked() */\n      if (arguments[groups[3][0]] === 'NanNew') {\n        return [arguments[0], '.ToLocalChecked()'].join('');\n      }\n\n      /* insert warning for removed functions as comment on new line above */\n      switch (arguments[groups[4][0]]) {\n        case 'GetIndexedPropertiesExternalArrayData':\n        case 'GetIndexedPropertiesExternalArrayDataLength':\n        case 'GetIndexedPropertiesExternalArrayDataType':\n        case 'GetIndexedPropertiesPixelData':\n        case 'GetIndexedPropertiesPixelDataLength':\n        case 'HasIndexedPropertiesInExternalArrayData':\n        case 'HasIndexedPropertiesInPixelData':\n        case 'SetIndexedPropertiesToExternalArrayData':\n        case 'SetIndexedPropertiesToPixelData':\n          return arguments[groups[4][0] - 1] ? arguments[0] : [warning1, arguments[0]].join('');\n        default:\n      }\n\n     /* remove unnecessary NanScope() */\n      switch (arguments[groups[5][0]]) {\n        case 'NAN_GETTER':\n        case 'NAN_METHOD':\n        case 'NAN_SETTER':\n        case 'NAN_INDEX_DELETER':\n        case 'NAN_INDEX_ENUMERATOR':\n        case 'NAN_INDEX_GETTER':\n        case 'NAN_INDEX_QUERY':\n        case 'NAN_INDEX_SETTER':\n        case 'NAN_PROPERTY_DELETER':\n        case 'NAN_PROPERTY_ENUMERATOR':\n        case 'NAN_PROPERTY_GETTER':\n        case 'NAN_PROPERTY_QUERY':\n        case 'NAN_PROPERTY_SETTER':\n          return arguments[groups[5][0] - 1];\n        default:\n      }\n\n      /* Value converstion */\n      switch (arguments[groups[6][0]]) {\n        case 'Boolean':\n        case 'Int32':\n        case 'Integer':\n        case 'Number':\n        case 'Object':\n        case 'String':\n        case 'Uint32':\n          return [arguments[groups[6][0] - 2], 'NanTo<v8::', arguments[groups[6][0]], '>(',  arguments[groups[6][0] - 1]].join('');\n        default:\n      }\n\n      /* other value conversion */\n      switch (arguments[groups[7][0]]) {\n        case 'BooleanValue':\n          return [arguments[groups[7][0] - 2], 'NanTo<bool>(', arguments[groups[7][0] - 1]].join('');\n        case 'Int32Value':\n          return [arguments[groups[7][0] - 2], 'NanTo<int32_t>(', arguments[groups[7][0] - 1]].join('');\n        case 'IntegerValue':\n          return [arguments[groups[7][0] - 2], 'NanTo<int64_t>(', arguments[groups[7][0] - 1]].join('');\n        case 'Uint32Value':\n          return [arguments[groups[7][0] - 2], 'NanTo<uint32_t>(', arguments[groups[7][0] - 1]].join('');\n        default:\n      }\n\n      /* NAN_WEAK_CALLBACK */\n      if (arguments[groups[8][0]] === 'NAN_WEAK_CALLBACK') {\n        return ['template<typename T>\\nvoid ',\n          arguments[groups[8][0] + 1], '(const NanWeakCallbackInfo<T> &data)'].join('');\n      }\n\n      /* use methods on NAN classes instead */\n      switch (arguments[groups[9][0]]) {\n        case 'NanDisposePersistent':\n          return [arguments[groups[9][0] + 1], '.Reset('].join('');\n        case 'NanObjectWrapHandle':\n          return [arguments[groups[9][0] + 1], '->handle('].join('');\n        default:\n      }\n\n      /* use method on NanPersistent instead */\n      if (arguments[groups[10][0]] === 'NanMakeWeakPersistent') {\n        return arguments[groups[10][0] + 1] + '.SetWeak(';\n      }\n\n      /* These return Maybes, the upper ones take no arguments */\n      switch (arguments[groups[11][0]]) {\n        case 'GetEndColumn':\n        case 'GetFunction':\n        case 'GetLineNumber':\n        case 'GetOwnPropertyNames':\n        case 'GetPropertyNames':\n        case 'GetSourceLine':\n        case 'GetStartColumn':\n        case 'NewInstance':\n        case 'ObjectProtoToString':\n        case 'ToArrayIndex':\n        case 'ToDetailString':\n          return [arguments[groups[11][0] - 2], 'Nan', arguments[groups[11][0]], '(', arguments[groups[11][0] - 1]].join('');\n        case 'CallAsConstructor':\n        case 'CallAsFunction':\n        case 'CloneElementAt':\n        case 'Delete':\n        case 'ForceSet':\n        case 'Get':\n        case 'GetPropertyAttributes':\n        case 'GetRealNamedProperty':\n        case 'GetRealNamedPropertyInPrototypeChain':\n        case 'Has':\n        case 'HasOwnProperty':\n        case 'HasRealIndexedProperty':\n        case 'HasRealNamedCallbackProperty':\n        case 'HasRealNamedProperty':\n        case 'Set':\n        case 'SetAccessor':\n        case 'SetIndexedPropertyHandler':\n        case 'SetNamedPropertyHandler':\n        case 'SetPrototype':\n          return [arguments[groups[11][0] - 2], 'Nan', arguments[groups[11][0]], '(', arguments[groups[11][0] - 1], ', '].join('');\n        default:\n      }\n\n      /* Automatic ToLocalChecked(), take it or leave it */\n      switch (arguments[groups[12][0]]) {\n        case 'Date':\n        case 'String':\n        case 'RegExp':\n          return ['NanNew', arguments[groups[12][0] - 1], arguments[groups[12][0] + 1], '.ToLocalChecked()'].join('');\n        default:\n      }\n\n      /* NanEquals is now required for uniformity */\n      if (arguments[groups[13][0]] === 'Equals') {\n        return [arguments[groups[13][0] - 1], 'NanEquals(', arguments[groups[13][0] - 1], ', ', arguments[groups[13][0] + 1]].join('');\n      }\n\n      /* use method on replacement class instead */\n      if (arguments[groups[14][0]] === 'NanAssignPersistent') {\n        return [arguments[groups[14][0] + 1], '.Reset('].join('');\n      }\n\n      /* args --> info */\n      if (arguments[groups[15][0]] === 'args') {\n        return [arguments[groups[15][0] - 1], 'info', arguments[groups[15][0] + 1]].join('');\n      }\n\n      /* ObjectWrap --> NanObjectWrap */\n      if (arguments[groups[16][0]] === 'ObjectWrap') {\n        return [arguments[groups[16][0] - 1], 'NanObjectWrap', arguments[groups[16][0] + 1]].join('');\n      }\n\n      /* Persistent --> NanPersistent */\n      if (arguments[groups[17][0]] === 'Persistent') {\n        return [arguments[groups[17][0] - 1], 'NanPersistent', arguments[groups[17][0] + 1]].join('');\n      }\n\n      /* This should not happen. A switch is probably missing a case if it does. */\n      throw 'Unhandled match: ' + arguments[0];\n}\n\n/* reads a file, runs replacement and writes it back */\nfunction processFile(file) {\n  fs.readFile(file, {encoding: 'utf8'}, function (err, data) {\n    if (err) {\n      throw err;\n    }\n\n    /* run replacement twice, might need more runs */\n    fs.writeFile(file, data.replace(master, replace).replace(master, replace), function (err) {\n      if (err) {\n        throw err;\n      }\n    });\n  });\n}\n\n/* process file names from command line and process the identified files */\nfor (i = 2, length = process.argv.length; i < length; i++) {\n  glob(process.argv[i], function (err, matches) {\n    if (err) {\n      throw err;\n    }\n    matches.forEach(processFile);\n  });\n}\n"]}