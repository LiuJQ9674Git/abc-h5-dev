{"version":3,"sources":["allowed-loop-closures-out.js"],"names":[],"mappings":"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","file":"allowed-loop-closures-out-compiled.js","sourcesContent":["\"use strict\";\nvar arr = [];\n\n// can be transformed (common WAT)\nfor (var x = 0; x < 10; x++) {\n    arr.push(function() { return x; });\n}\n\n// can be transformed (common manual work-around)\nfor (var x$0 = 0; x$0 < 3; x$0++) {\n    arr.push((function(x) { return function() { return x; } })(x$0));\n}\n\n// can be transformed (no extra IIFE will be inserted)\nfor (var x$1 = 0; x$1 < 3; x$1++) {(function(){\n    var y = 1;\n    arr.push(function() { return y; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nfor (var x$2 = 0; x$2 < 3; x$2++) {(function(){\n    var y = 1;\n    arr.push(function() { return y; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nfor (var x$3 = 0; x$3 < 3; x$3++) {(function(){\n    var y = x$3;\n    arr.push(function() { return y; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nfor (var x$4 = 0; x$4 < 3; x$4++) {(function(){\n    var y = x$4, z = arr.push(function() { return y; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nfor (var x$5 = 0; x$5 < 3; x$5++) {(function(){\n    var x = 1;\n    arr.push(function() { return x; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nwhile (true) {\n    var f = function() {\n        for (var x = 0; x < 10; x++) {(function(){\n            var y = x;\n            arr.push(function() { return y; });\n        }).call(this);}\n    };\n    f();\n}\n\n// it's fine to use break, continue, return and arguments as long as\n// it's contained within a function below the loop so that it doesn't\n// interfere with the inserted IIFE\n(function() {\n    for (var x = 0; x < 3; x++) {(function(){\n        var y = x;\n        (function() {\n            for(;;) break;\n            return;\n        })();\n        (function() {\n            for(;;) continue;\n            arguments\n        })();\n        arr.push(function() { return y; });\n    }).call(this);}\n})();\n\n// For-In\nfor (var x$6 in [0,1,2]) {(function(x){\n    arr.push(function() { return x; });\n}).call(this, x$6);}\n\n// Block-less For-In\nfor (var x$7 in [0,1,2]) (function(x){arr.push(function() { return x; });}).call(this, x$7);/*with semicolon*/\nfor (var x$8 in [0,1,2]) (function(x){arr.push(function() { return x; })}).call(this, x$8);/*no semicolon*/\n\nnull; // previous semicolon-less for statement's range ends just before 'n' in 'null'\n\n// For-Of\nfor (var x$9 of [0,1,2]) {(function(x){\n    arr.push(function() { return x; });\n}).call(this, x$9);}\n\n// Block-less For-Of\nfor (var x$10 of [0,1,2]) (function(x){arr.push(function() { return x; });}).call(this, x$10);/*with semicolon*/\nfor (var x$11 of [0,1,2]) (function(x){arr.push(function() { return x; })}).call(this, x$11);/*no semicolon*/\n\nnull; // previous semicolon-less for statement's range ends just before 'n' in 'null'\n\n// While\nwhile (true) {(function(){\n    var x = 1;\n    arr.push(function() { return x; });\n}).call(this);}\n\n// Do-While\ndo {(function(){\n    var x = 1;\n    arr.push(function() { return x; });\n}).call(this);} while (true);\n\narr.forEach(function(f) {\n    console.log(f());\n});\n"]}