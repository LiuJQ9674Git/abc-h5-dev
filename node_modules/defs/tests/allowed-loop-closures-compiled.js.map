{"version":3,"sources":["allowed-loop-closures.js"],"names":[],"mappings":"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","file":"allowed-loop-closures-compiled.js","sourcesContent":["\"use strict\";\nvar arr = [];\n\n// can be transformed (common WAT)\nfor (var x = 0; x < 10; x++) {\n    arr.push(function() { return x; });\n}\n\n// can be transformed (common manual work-around)\nfor (let x = 0; x < 3; x++) {\n    arr.push((function(x) { return function() { return x; } })(x));\n}\n\n// can be transformed (no extra IIFE will be inserted)\nfor (let x = 0; x < 3; x++) {(function(){\n    let y = 1;\n    arr.push(function() { return y; });\n}).call(this);}\n\n// can be transformed (added IIFE)\nfor (let x = 0; x < 3; x++) {\n    let y = 1;\n    arr.push(function() { return y; });\n}\n\n// can be transformed (added IIFE)\nfor (let x = 0; x < 3; x++) {\n    let y = x;\n    arr.push(function() { return y; });\n}\n\n// can be transformed (added IIFE)\nfor (let x = 0; x < 3; x++) {\n    let y = x, z = arr.push(function() { return y; });\n}\n\n// can be transformed (added IIFE)\nfor (let x = 0; x < 3; x++) {\n    let x = 1;\n    arr.push(function() { return x; });\n}\n\n// can be transformed (added IIFE)\nwhile (true) {\n    let f = function() {\n        for (let x = 0; x < 10; x++) {\n            let y = x;\n            arr.push(function() { return y; });\n        }\n    };\n    f();\n}\n\n// it's fine to use break, continue, return and arguments as long as\n// it's contained within a function below the loop so that it doesn't\n// interfere with the inserted IIFE\n(function() {\n    for (let x = 0; x < 3; x++) {\n        let y = x;\n        (function() {\n            for(;;) break;\n            return;\n        })();\n        (function() {\n            for(;;) continue;\n            arguments\n        })();\n        arr.push(function() { return y; });\n    }\n})();\n\n// For-In\nfor (let x in [0,1,2]) {\n    arr.push(function() { return x; });\n}\n\n// Block-less For-In\nfor (let x in [0,1,2]) arr.push(function() { return x; });/*with semicolon*/\nfor (let x in [0,1,2]) arr.push(function() { return x; })/*no semicolon*/\n\nnull; // previous semicolon-less for statement's range ends just before 'n' in 'null'\n\n// For-Of\nfor (let x of [0,1,2]) {\n    arr.push(function() { return x; });\n}\n\n// Block-less For-Of\nfor (let x of [0,1,2]) arr.push(function() { return x; });/*with semicolon*/\nfor (let x of [0,1,2]) arr.push(function() { return x; })/*no semicolon*/\n\nnull; // previous semicolon-less for statement's range ends just before 'n' in 'null'\n\n// While\nwhile (true) {\n    let x = 1;\n    arr.push(function() { return x; });\n}\n\n// Do-While\ndo {\n    let x = 1;\n    arr.push(function() { return x; });\n} while (true);\n\narr.forEach(function(f) {\n    console.log(f());\n});\n"]}