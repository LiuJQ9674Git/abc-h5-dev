{"version":3,"sources":["setData.js"],"names":[],"mappings":"AAAA,IAAI,cAAc,QAAQ,eAAR,CAAlB;IACI,MAAM,QAAQ,aAAR,CADV;;;AAIA,IAAI,YAAY,GAAhB;IACI,WAAW,EADf;;;;;;;;;;;;;;;AAgBA,IAAI,UAAW,YAAW;AACxB,MAAI,QAAQ,CAAZ;MACI,aAAa,CADjB;;AAGA,SAAO,UAAS,GAAT,EAAc,KAAd,EAAqB;AAC1B,QAAI,QAAQ,KAAZ;QACI,YAAY,YAAY,QAAQ,UAApB,CADhB;;AAGA,iBAAa,KAAb;AACA,QAAI,YAAY,CAAhB,EAAmB;AACjB,UAAI,EAAE,KAAF,IAAW,SAAf,EAA0B;AACxB,eAAO,GAAP;AACD;AACF,KAJD,MAIO;AACL,cAAQ,CAAR;AACD;AACD,WAAO,YAAY,GAAZ,EAAiB,KAAjB,CAAP;AACD,GAbD;AAcD,CAlBc,EAAf;;AAoBA,OAAO,OAAP,GAAiB,OAAjB","file":"setData-compiled.js","sourcesContent":["var baseSetData = require('./baseSetData'),\n    now = require('../date/now');\n\n/** Used to detect when a function becomes hot. */\nvar HOT_COUNT = 150,\n    HOT_SPAN = 16;\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity function\n * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = (function() {\n  var count = 0,\n      lastCalled = 0;\n\n  return function(key, value) {\n    var stamp = now(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return key;\n      }\n    } else {\n      count = 0;\n    }\n    return baseSetData(key, value);\n  };\n}());\n\nmodule.exports = setData;\n"]}