{"version":3,"sources":["createUncontrollable.js"],"names":[],"mappings":"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","file":"createUncontrollable-compiled.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = createUncontrollable;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction createUncontrollable(mixins, set) {\n\n  return uncontrollable;\n\n  function uncontrollable(Component, controlledValues) {\n    var methods = arguments.length <= 2 || arguments[2] === undefined ? [] : arguments[2];\n\n    var displayName = Component.displayName || Component.name || 'Component',\n        basePropTypes = utils.getType(Component).propTypes,\n        isCompositeComponent = utils.isReactComponent(Component),\n        propTypes;\n\n    propTypes = utils.uncontrolledPropTypes(controlledValues, basePropTypes, displayName);\n\n    (0, _invariant2.default)(isCompositeComponent || !methods.length, '[uncontrollable] stateless function components cannot pass through methods ' + 'becasue they have no associated instances. Check component: ' + displayName + ', ' + 'attempting to pass through methods: ' + methods.join(', '));\n    methods = utils.transform(methods, function (obj, method) {\n      obj[method] = function () {\n        var _refs$inner;\n\n        return (_refs$inner = this.refs.inner)[method].apply(_refs$inner, arguments);\n      };\n    }, {});\n\n    var component = _react2.default.createClass(_extends({\n\n      displayName: 'Uncontrolled(' + displayName + ')',\n\n      mixins: mixins,\n\n      propTypes: propTypes\n\n    }, methods, {\n      componentWillMount: function componentWillMount() {\n        var props = this.props,\n            keys = Object.keys(controlledValues);\n\n        this._values = utils.transform(keys, function (values, key) {\n          values[key] = props[utils.defaultKey(key)];\n        }, {});\n      },\n\n\n      /**\n       * If a prop switches from controlled to Uncontrolled\n       * reset its value to the defaultValue\n       */\n      componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n        var _this = this;\n\n        var props = this.props,\n            keys = Object.keys(controlledValues);\n\n        keys.forEach(function (key) {\n          if (utils.getValue(nextProps, key) === undefined && utils.getValue(props, key) !== undefined) {\n            _this._values[key] = nextProps[utils.defaultKey(key)];\n          }\n        });\n      },\n      render: function render() {\n        var _this2 = this;\n\n        var newProps = {};\n        var _props = this.props;\n        var valueLink = _props.valueLink;\n        var checkedLink = _props.checkedLink;\n\n        var props = _objectWithoutProperties(_props, ['valueLink', 'checkedLink']);\n\n        utils.each(controlledValues, function (handle, propName) {\n          var linkPropName = utils.getLinkName(propName),\n              prop = _this2.props[propName];\n\n          if (linkPropName && !isProp(_this2.props, propName) && isProp(_this2.props, linkPropName)) {\n            prop = _this2.props[linkPropName].value;\n          }\n\n          newProps[propName] = prop !== undefined ? prop : _this2._values[propName];\n\n          newProps[handle] = setAndNotify.bind(_this2, propName);\n        });\n\n        newProps = _extends({}, props, newProps, {\n          ref: isCompositeComponent ? 'inner' : null\n        });\n\n        return _react2.default.createElement(Component, newProps);\n      }\n    }));\n\n    component.ControlledComponent = Component;\n\n    /**\n     * useful when wrapping a Component and you want to control\n     * everything\n     */\n    component.deferControlTo = function (newComponent) {\n      var additions = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var nextMethods = arguments[2];\n\n      return uncontrollable(newComponent, _extends({}, controlledValues, additions), nextMethods);\n    };\n\n    return component;\n\n    function setAndNotify(propName, value) {\n      var linkName = utils.getLinkName(propName),\n          handler = this.props[controlledValues[propName]];\n\n      if (linkName && isProp(this.props, linkName) && !handler) {\n        handler = this.props[linkName].requestChange;\n      }\n\n      for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      set(this, propName, handler, value, args);\n    }\n\n    function isProp(props, prop) {\n      return props[prop] !== undefined;\n    }\n  }\n}\nmodule.exports = exports['default'];"]}